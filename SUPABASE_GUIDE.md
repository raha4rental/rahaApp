# Ø¯Ù„ÙŠÙ„ Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Supabase | Supabase Database Setup Guide

## Ø§Ù„Ù…Ø­ØªÙˆÙ‰ | Table of Contents

1. [Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Supabase](#Ø¥Ù†Ø´Ø§Ø¡-Ø­Ø³Ø§Ø¨-supabase)
2. [Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹](#Ø¥Ø¹Ø¯Ø§Ø¯-Ø§Ù„Ù…Ø´Ø±ÙˆØ¹)
3. [Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„](#Ø¥Ù†Ø´Ø§Ø¡-Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„)
4. [Ø±Ø¨Ø· Ø§Ù„ØªØ·Ø¨ÙŠÙ‚](#Ø±Ø¨Ø·-Ø§Ù„ØªØ·Ø¨ÙŠÙ‚)
5. [Ø£Ù…Ø«Ù„Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…](#Ø£Ù…Ø«Ù„Ø©-Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…)
6. [Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª](#Ø§Ù„Ø£Ù…Ø§Ù†-ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª)

## Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Supabase

### Ø§Ù„Ø®Ø·ÙˆØ© 1: Ø§Ù„ØªØ³Ø¬ÙŠÙ„

1. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ [supabase.com](https://supabase.com)
2. Ø§Ù†Ù‚Ø± Ø¹Ù„Ù‰ "Start your project"
3. Ø³Ø¬Ù„ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… GitHub Ø£Ùˆ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ

### Ø§Ù„Ø®Ø·ÙˆØ© 2: Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø´Ø±ÙˆØ¹ Ø¬Ø¯ÙŠØ¯

1. Ø§Ù†Ù‚Ø± "New project"
2. Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†Ø¸Ù…Ø© Ø£Ùˆ Ø£Ù†Ø´Ø¦ Ø¬Ø¯ÙŠØ¯Ø©
3. Ø£Ø¯Ø®Ù„ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹:
   - **Ø§Ø³Ù… Ø§Ù„Ù…Ø´Ø±ÙˆØ¹**: `raha-real-estate`
   - **ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª**: Ø§Ø³ØªØ®Ø¯Ù… Ù…ÙˆÙ„Ø¯ ÙƒÙ„Ù…Ø§Øª Ù…Ø±ÙˆØ± Ù‚ÙˆÙŠØ©
   - **Ø§Ù„Ù…Ù†Ø·Ù‚Ø©**: Ø§Ø®ØªØ± Ø§Ù„Ø£Ù‚Ø±Ø¨ Ù„Ùƒ (Ù…Ø«Ù„ Middle East)

## Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹

### Ø§Ù„Ø®Ø·ÙˆØ© 3: Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ù…ÙØ§ØªÙŠØ­ API

Ø¨Ø¹Ø¯ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰:
`Settings` â†’ `API`

Ø³ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰:

- **Project URL**: `https://your-project.supabase.co`
- **anon public key**: Ù„Ù„ÙˆØµÙˆÙ„ Ø§Ù„Ø¹Ø§Ù…
- **service_role key**: Ù„Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠØ©

### Ø§Ù„Ø®Ø·ÙˆØ© 4: ØªØ­Ø¯ÙŠØ« Ù…Ù„Ù Ø§Ù„ØªÙƒÙˆÙŠÙ†

```javascript
// ÙÙŠ Ù…Ù„Ù supabaseConfig.js
const supabaseUrl = 'https://your-project-id.supabase.co';
const supabaseAnonKey = 'your-anon-key-here';
```

## Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„

### Ø§Ù„Ø®Ø·ÙˆØ© 5: ØªØ´ØºÙŠÙ„ Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª SQL

1. Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ `SQL Editor` ÙÙŠ Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Supabase
2. Ø§Ù†Ø³Ø® Ù…Ø­ØªÙˆÙ‰ Ù…Ù„Ù `database_setup.sql`
3. Ø´ØºÙ„ Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…

Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ø§Ù„ØªØ§Ù„ÙŠØ©:

- `buildings` - Ø§Ù„Ù…Ø¨Ø§Ù†ÙŠ
- `apartments` - Ø§Ù„Ø´Ù‚Ù‚
- `profiles` - Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
- `bookings` - Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª
- `maintenance_requests` - Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØµÙŠØ§Ù†Ø©
- `car_rentals` - ØªØ£Ø¬ÙŠØ± Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª
- `favorites` - Ø§Ù„Ù…ÙØ¶Ù„Ø©

## Ø±Ø¨Ø· Ø§Ù„ØªØ·Ø¨ÙŠÙ‚

### Ø§Ù„Ø®Ø·ÙˆØ© 6: ØªØ«Ø¨ÙŠØª Ø§Ù„Ù…ÙƒØªØ¨Ø§Øª

```bash
npm install @supabase/supabase-js
```

### Ø§Ù„Ø®Ø·ÙˆØ© 7: Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø§ØªØµØ§Ù„

```javascript
// Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø®Ø¯Ù…Ø§Øª ÙÙŠ Ø§Ù„ÙƒÙˆÙ…Ø¨ÙˆÙ†Ù†Øª
import { buildingsService, bookingsService } from './services/database';

// Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø®Ø¯Ù…Ø§Øª
const buildings = await buildingsService.getAllBuildings();
```

## Ø£Ù…Ø«Ù„Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…

### 1. Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø¨Ø§Ù†ÙŠ

```javascript
import { buildingsService } from './services/database';

const fetchBuildings = async () => {
  try {
    const buildings = await buildingsService.getAllBuildings();
    setBuildings(buildings);
  } catch (error) {
    console.error('Ø®Ø·Ø£ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø¨Ø§Ù†ÙŠ:', error);
  }
};
```

### 2. Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø¬Ø²

```javascript
import { bookingsService } from './services/database';

const createBooking = async (buildingId, apartmentId) => {
  const bookingData = {
    user_id: currentUserId,
    building_id: buildingId,
    apartment_id: apartmentId,
    booking_type: 'viewing',
    booking_date: new Date().toISOString(),
    message: 'Ø£Ø±ØºØ¨ ÙÙŠ Ø²ÙŠØ§Ø±Ø© Ø§Ù„Ø´Ù‚Ø©',
  };

  try {
    const booking = await bookingsService.createBooking(bookingData);
    Alert.alert('Ù†Ø¬Ø­', 'ØªÙ… Ø­Ø¬Ø² Ø§Ù„Ù…ÙˆØ¹Ø¯ Ø¨Ù†Ø¬Ø§Ø­');
  } catch (error) {
    Alert.alert('Ø®Ø·Ø£', 'ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø­Ø¬Ø²');
  }
};
```

### 3. Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ ØµÙŠØ§Ù†Ø©

```javascript
import { maintenanceService } from './services/database';

const submitMaintenance = async () => {
  const requestData = {
    user_id: currentUserId,
    building_id: buildingId,
    apartment_id: apartmentId,
    request_type: 'plumbing',
    priority: 'high',
    title: 'ØªØ³Ø±ÙŠØ¨ Ù…ÙŠØ§Ù‡',
    description: 'ØªØ³Ø±ÙŠØ¨ ÙÙŠ Ø§Ù„Ù…Ø·Ø¨Ø®',
    contact_method: 'whatsapp',
  };

  const request =
    await maintenanceService.submitMaintenanceRequest(requestData);
};
```

## Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª

### Row Level Security (RLS)

ØªÙ… ØªÙØ¹ÙŠÙ„ RLS Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„ Ù…Ø¹ Ø§Ù„Ø³ÙŠØ§Ø³Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ©:

#### Ø³ÙŠØ§Ø³Ø§Øª Ø§Ù„Ù…Ø¨Ø§Ù†ÙŠ ÙˆØ§Ù„Ø´Ù‚Ù‚:

- Ù‚Ø±Ø§Ø¡Ø© Ø¹Ø§Ù…Ø© Ù„Ù„Ø¬Ù…ÙŠØ¹
- Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ù„Ù„Ù…Ø¯Ø±Ø§Ø¡ ÙÙ‚Ø·

#### Ø³ÙŠØ§Ø³Ø§Øª Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø´Ø®ØµÙŠØ©:

- Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ±Ù‰ Ø¨ÙŠØ§Ù†Ø§ØªÙ‡ ÙÙ‚Ø·
- ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§ØªÙ‡ Ø§Ù„Ø®Ø§ØµØ©

#### Ø³ÙŠØ§Ø³Ø§Øª Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª ÙˆØ§Ù„ØµÙŠØ§Ù†Ø©:

- Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ±Ù‰ Ø·Ù„Ø¨Ø§ØªÙ‡ ÙÙ‚Ø·
- ÙŠÙ…ÙƒÙ† Ø¥Ù†Ø´Ø§Ø¡ Ø·Ù„Ø¨Ø§Øª Ø¬Ø¯ÙŠØ¯Ø©
- ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„ Ø·Ù„Ø¨Ø§ØªÙ‡ Ø§Ù„Ø®Ø§ØµØ©

### Ù…ØµØ§Ø¯Ù‚Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†

```javascript
// ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
const { data, error } = await supabase.auth.signInWithPassword({
  email: 'user@example.com',
  password: 'password',
});

// ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬
await supabase.auth.signOut();

// Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ
const {
  data: { user },
} = await supabase.auth.getUser();
```

## Ù…ÙŠØ²Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©

### Real-time Updates

```javascript
// Ø§Ù„Ø§Ø³ØªÙ…Ø§Ø¹ Ù„ØªØºÙŠÙŠØ±Ø§Øª Ø§Ù„Ù…Ø¨Ø§Ù†ÙŠ
const subscription = supabase
  .channel('buildings-changes')
  .on(
    'postgres_changes',
    { event: '*', schema: 'public', table: 'buildings' },
    payload => {
      console.log('ØªØºÙŠÙŠØ±:', payload);
      // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
    }
  )
  .subscribe();

// Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ
supabase.removeChannel(subscription);
```

### Ø±ÙØ¹ Ø§Ù„Ù…Ù„ÙØ§Øª (Storage)

```javascript
// Ø¥Ø¹Ø¯Ø§Ø¯ Storage bucket
const { data, error } = await supabase.storage
  .from('property-images')
  .upload('building1/image1.jpg', file);

// Ø¬Ù„Ø¨ Ø±Ø§Ø¨Ø· Ø§Ù„ØµÙˆØ±Ø©
const { data } = supabase.storage
  .from('property-images')
  .getPublicUrl('building1/image1.jpg');
```

## Ù†ØµØ§Ø¦Ø­ Ù…Ù‡Ù…Ø©

### 1. Ø§Ù„Ø£Ø¯Ø§Ø¡

- Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„ÙÙ‡Ø§Ø±Ø³ Ù„Ù„Ø¨Ø­Ø« Ø§Ù„Ø³Ø±ÙŠØ¹
- Ø­Ø¯Ø¯ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ÙÙ‚Ø· ÙÙŠ `select()`
- Ø§Ø³ØªØ®Ø¯Ù… `limit()` Ù„Ù„ØªØµÙØ­ Ø§Ù„Ù…ØªØ¯Ø±Ø¬

### 2. Ø§Ù„Ø£Ù…Ø§Ù†

- Ù„Ø§ ØªØ¶Ø¹ `service_role` key ÙÙŠ Ø§Ù„Ø¹Ù…ÙŠÙ„
- Ø§Ø³ØªØ®Ø¯Ù… RLS Ø¯Ø§Ø¦Ù…Ø§Ù‹
- ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…Ø¯Ø®Ù„Ø§Øª Ù‚Ø¨Ù„ Ø§Ù„Ø­ÙØ¸

### 3. Ø§Ù„ØªØ·ÙˆÙŠØ±

- Ø§Ø³ØªØ®Ø¯Ù… TypeScript Ù„Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ù†ÙˆØ¹ÙŠ
- Ø§Ø®ØªØ¨Ø± Ø§Ù„Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª ÙÙŠ SQL Editor Ø£ÙˆÙ„Ø§Ù‹
- Ø±Ø§Ù‚Ø¨ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙÙŠ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…

## Ø¯Ø¹Ù… Ø¥Ø¶Ø§ÙÙŠ

### Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù…ÙÙŠØ¯Ø©

- [ÙˆØ«Ø§Ø¦Ù‚ Supabase](https://supabase.com/docs)
- [Ù…Ø±Ø¬Ø¹ JavaScript](https://supabase.com/docs/reference/javascript)
- [Ø£Ù…Ø«Ù„Ø© React Native](https://supabase.com/docs/guides/getting-started/quickstarts/react-native)

### Ø®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡

- Discord: [supabase.com/discord](https://supabase.com/discord)
- GitHub: [github.com/supabase/supabase](https://github.com/supabase/supabase)

---

## Ù…Ù„Ù Ø§Ù„ØªÙƒÙˆÙŠÙ† Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ

Ø¨Ø¹Ø¯ Ø¥ÙƒÙ…Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø®Ø·ÙˆØ§ØªØŒ ÙŠØ¬Ø¨ Ø£Ù† ÙŠØ¨Ø¯Ùˆ Ù…Ù„Ù `supabaseConfig.js` ÙƒØ§Ù„ØªØ§Ù„ÙŠ:

```javascript
import { createClient } from '@supabase/supabase-js';

const supabaseUrl = 'https://your-project-id.supabase.co';
const supabaseAnonKey = 'your-anon-key-here';

export const supabase = createClient(supabaseUrl, supabaseAnonKey, {
  auth: {
    autoRefreshToken: true,
    persistSession: true,
    detectSessionInUrl: false,
  },
});
```

ğŸ‰ **ØªÙ‡Ø§Ù†ÙŠÙ†Ø§!** ØªÙ… Ø¥Ø¹Ø¯Ø§Ø¯ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­ ÙˆØ£ØµØ¨Ø­ ØªØ·Ø¨ÙŠÙ‚ Ø±Ø§Ø­Ø© Ø§Ù„Ø¹Ù‚Ø§Ø±ÙŠ Ø¬Ø§Ù‡Ø²Ø§Ù‹ Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…!
